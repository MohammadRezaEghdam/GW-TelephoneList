<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/bootstrap.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>

  <title>Document</title>
</head>

<body>
  <!-- ! navigationbar -->
  <div class="container-fluid mb-4">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="#"><i class="fa fa-phone" aria-hidden="true"></i></a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Link</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
              aria-expanded="false">
              Dropdown
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="#">Action</a>
              <a class="dropdown-item" href="#">Another action</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="#">Something else here</a>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link disabled">Disabled</a>
          </li>
        </ul>
        <form class="form-inline my-2 my-lg-0">
          <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search" id="search"
            value="">
          <button class="btn btn-outline-success my-2 my-sm-0" type="submit" id="searchBtn"><i class="fa fa-search"
              aria-hidden="true"></i></button>
        </form>
      </div>
    </nav>
  </div>
  <hr>
  <!-- ! breadcrumb -->
  <div class="container-fluid">

    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="index.html">Home</a></li>
        <li class="breadcrumb-item"><a href="list.html">list</a></li>
      </ol>
    </nav>
  </div>
  <!-- ! buttons -->
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-6"><a href="index.html" class="btn btn-danger"><i class="fa fa-backward"
            aria-hidden="true"></i> Back</a>
        <a href="addTelephone.html" class="btn btn-success ml-3" id="addTelephone">Add Telephone <i class="fa fa-plus"
            aria-hidden="true"></i></a>
        <a href="#" class="btn btn-info" id="printTable">Print Contacts <i class="fa fa-print"
            aria-hidden="true"></i></a>
      </div>
    </div>
  </div>
  <!-- !fromgroup -->
  <div class="container-fluid">
    <div class="row">

      <div class="col-md-2 mt-4">
        <ul class="list-group">
          <li class="list-group-item active">Content group <i class="fa fa-user" aria-hidden="true"></i></li>
          <li class="list-group-item"><a href="Contents/PublicContentGroup.html">Public group</a></li>
          <li class="list-group-item"><a href="Contents/PrivateContentGroup.html">Private group</a></li>
          <li class="list-group-item"><a href="Contents/Family.html">Family</a></li>
          <li class="list-group-item"><a href="Contents/etc.html">etc</a></li>
        </ul>
      </div>
      <div class="col-md-10">

        <table class="table mt-4 text-center table-striped">
          <thead class="table-primary bg-primary">
            <tr>
              <th scope="col">#</th>
              <th scope="col">Gender</th>
              <th scope="col">Full Name</th>
              <th scope="col">Email</th>
              <th scope="col">Phone Number</th>
              <th scope="col">Profile Avatar</th>
              <th scope="col">Edit</th>
              <th scope="col">Delete</th>
            </tr>
          </thead>
          <tbody id="list">

          </tbody>
        </table>
        <!-- ! pagination  -->
        <div class="text-center">
          <nav aria-label="...">
            <ul class="pagination pagination-sm">
              <li class="page-item">
                <p class="page-link" href="" id="firstPage">1</p>
              </li>
              <li class="page-item">
                <p class="page-link" href="" id="secondPage">2</p>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
    <!-- ! Module Here -->
    <!-- <div class="modal fade" id="DeleteModule" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
      aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Delete Contact</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            Are you sure about deleting this contact?!!
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-danger">Delete <i class="fa fa-trash" aria-hidden="true"></i></button>
          </div>
        </div>
      </div>
    </div> -->
  </div>
  <script>
    // $('#DeleteModule').on('shown.bs.modal', function () {
    //   $('#DeleteModule').trigger('focus')
    // })


    $(document).ready(function () {
      $(window).on('load', function () {
        runner(1)
      });
      // ! Pagginatio here
      var page;

      $("#firstPage").click(function () {
        page = 1;
        runner(page);
      });
      $("#secondPage").click(function () {
        page = 2;
        runner(page);
      });


      var runner = function (page) {

        const xhr = new XMLHttpRequest();
        xhr.open("GET", "https://randomuser.me/api?page=" + page + "&results=10&seed=erfan", true);
        xhr.onload = function () {
          if (this.status === 200) {
            obj = JSON.parse(this.responseText);

            let tableList = document.getElementById("list");

            str = ""
            for (const key in obj.results) {
              var id = key;
              str += `<tr>
                <th scope="row" id="id">${++id}</th>
                <td>${obj.results[key].gender}</td>
                <td>${obj.results[key].name['title'] + " " + obj.results[key].name['first'] + "" + obj.results[key].name['last']}</td>
                <td>${obj.results[key].email}</td>
                <td>${obj.results[key].phone}</td>
                <td><img src="${obj.results[key].picture['thumbnail']}" alt="" srcset="" height="30px" width="30px"></td>
                <td> <a href="edit.html" class="btn btn-info">edit <i class="fas fa-edit    "></i></a> </td>
                <td> <a href="#" class="btn btn-danger" id="DeleteUser">Delete <i class="fa fa-trash"
            aria-hidden="true"></i></a> </td>
              </tr>`;
              tableList.innerHTML = str;
            }
          } else {
            console.log("API failed!")
          }
        }
        xhr.send();
      }


      // print table here
      $("#printTable").on("click", function (e) {
        const win = window.open();
        const content = $('#list')[0].outerHTML;
        win.document.write(content);
        win.document.close();
        win.print();
        e.preventDefault();
      });


      $("#search").on("keyup", function (e) {
        if (e.which === 46) {
          $(this).val('');
          $("#list tr").show();
        } else {
          var value = $(this).val().toLowerCase();

          $("#list tr").filter(function () {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
          });
        }

      });

      $("#DeleteUser").on("click", function (e) {
        e.preventDefault();
        alert("some")

        // let row = $(this).closest('tr');
        // let id = row.find('#id').text();
        // $.ajax({
        //   url: 'https://webhook.site/5a540f85-49b5-4aa9-8ec8-811b85601c0f?id=10',
        //   type: 'DELETE',
        //   success: function (result) {
        //     console.log(result);
        //   }
        // });
      });


    });
  </script>
  <script src="js/bootstrap.js"></script>
  <script src="js/bootstrap.bundle.js"></script>
</body>

</html>